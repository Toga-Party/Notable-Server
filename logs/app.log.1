2021-03-08 16:03:58,390 - app - ERROR - Traceback (most recent call last):
  File "app.py", line 101, in predict
    all_predictions = model.predict(cv_img)
  File "C:\Users\aroue\Downloads\Documents\@ML\notable-server\ml_model.py", line 58, in predict
    segmented_staves = Slice(cv_img)
  File "C:\Users\aroue\Downloads\Documents\@ML\notable-server\segmenter\slicer.py", line 63, in Slice
    ret, mat = binarize_image(im_np)
  File "C:\Users\aroue\Downloads\Documents\@ML\notable-server\segmenter\commonfunctions.py", line 65, in binarize_image
    mat = cv2.imdecode(img, cv2.IMREAD_UNCHANGED)
cv2.error: OpenCV(4.4.0) C:\Users\appveyor\AppData\Local\Temp\1\pip-req-build-h4wtvo23\opencv\modules\imgcodecs\src\loadsave.cpp:755: error: (-215:Assertion failed) buf.checkVector(1, CV_8U) > 0 in function 'cv::imdecode_'


2021-03-08 16:16:16,779 - app - INFO - POST: success
2021-03-08 16:16:16,880 - app - INFO - # of files in request: 1
2021-03-08 16:16:16,880 - app - INFO - Host: localhost:5000
Connection: keep-alive
Content-Length: 25985
Cache-Control: max-age=0
Sec-Ch-Ua: "Chromium";v="88", "Google Chrome";v="88", ";Not A Brand";v="99"
Sec-Ch-Ua-Mobile: ?0
Upgrade-Insecure-Requests: 1
Origin: http://localhost:5000
Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryEvGAk70hY9aWbyMB
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.190 Safari/537.36
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9
Sec-Fetch-Site: same-origin
Sec-Fetch-Mode: navigate
Sec-Fetch-User: ?1
Sec-Fetch-Dest: document
Referer: http://localhost:5000/
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Cookie: username-localhost-8889="2|1:0|10:1613749685|23:username-localhost-8889|44:ZDM3ZDc3YTUyNDE1NDFlMWE2ZmMyNmU1YTgwZWZmNGM=|99d0c6ad14108bd322ecb8bc116a3d6824612c71539e7642e77cba935b5c810c"; _xsrf=2|9e09c60d|671b43550472c70a2c60012cbf10b0db|1614128792; username-localhost-8888="2|1:0|10:1615191233|23:username-localhost-8888|44:YzA0MTlkYjljOWI3NGFhM2IxMzcyOWVlMzhlMTk3MmY=|49f62b86b13ed3262e436a052de578ad1c5bf0a75346ce1145db32f5c562aee0"


2021-03-08 16:16:16,881 - app - INFO - File: exists
2021-03-08 16:16:16,881 - app - INFO - File: name = happybday.PNG
2021-03-08 16:16:16,881 - app - INFO - File: exists | Format: matching
2021-03-08 16:16:19,926 - app - ERROR - ERROR: prediction exceptionExpected Ptr<cv::UMat> for argument 'buf'
2021-03-08 16:16:20,162 - app - ERROR - Traceback (most recent call last):
  File "app.py", line 101, in predict
    all_predictions = model.predict(cv_img)
  File "C:\Users\aroue\Downloads\Documents\@ML\notable-server\ml_model.py", line 58, in predict
    segmented_staves = Slice(cv_img)
  File "C:\Users\aroue\Downloads\Documents\@ML\notable-server\segmenter\slicer.py", line 63, in Slice
    ret, mat = binarize_image(pill)
  File "C:\Users\aroue\Downloads\Documents\@ML\notable-server\segmenter\commonfunctions.py", line 65, in binarize_image
    mat = cv2.imdecode(img, cv2.IMREAD_UNCHANGED)
TypeError: Expected Ptr<cv::UMat> for argument 'buf'

2021-03-08 16:32:02,035 - app - INFO - POST: success
2021-03-08 16:32:02,172 - app - INFO - # of files in request: 1
2021-03-08 16:32:02,172 - app - INFO - Host: localhost:5000
Connection: keep-alive
Content-Length: 25985
Cache-Control: max-age=0
Sec-Ch-Ua: "Chromium";v="88", "Google Chrome";v="88", ";Not A Brand";v="99"
Sec-Ch-Ua-Mobile: ?0
Upgrade-Insecure-Requests: 1
Origin: http://localhost:5000
Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryUlMMeCS4muwIWrOC
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.190 Safari/537.36
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9
Sec-Fetch-Site: same-origin
Sec-Fetch-Mode: navigate
Sec-Fetch-User: ?1
Sec-Fetch-Dest: document
Referer: http://localhost:5000/
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Cookie: username-localhost-8889="2|1:0|10:1613749685|23:username-localhost-8889|44:ZDM3ZDc3YTUyNDE1NDFlMWE2ZmMyNmU1YTgwZWZmNGM=|99d0c6ad14108bd322ecb8bc116a3d6824612c71539e7642e77cba935b5c810c"; _xsrf=2|9e09c60d|671b43550472c70a2c60012cbf10b0db|1614128792; username-localhost-8888="2|1:0|10:1615192028|23:username-localhost-8888|44:NzUzYTlkOWE5NGZhNDJiNjkzOTE3ZDVmOWI2Mjk5MDg=|63129581ad6ea827e832082af1aee9b7920a1bf8a60a09ec09b1af6ff892c236"


2021-03-08 16:32:02,172 - app - INFO - File: exists
2021-03-08 16:32:02,172 - app - INFO - File: name = happybday.PNG
2021-03-08 16:32:02,172 - app - INFO - File: exists | Format: matching
2021-03-08 16:32:05,417 - app - ERROR - ERROR: prediction exceptionExpected Ptr<cv::UMat> for argument 'src'
2021-03-08 16:32:05,807 - app - ERROR - Traceback (most recent call last):
  File "app.py", line 101, in predict
    all_predictions = model.predict(cv_img)
  File "C:\Users\aroue\Downloads\Documents\@ML\notable-server\ml_model.py", line 58, in predict
    segmented_staves = Slice(cv_img)
  File "C:\Users\aroue\Downloads\Documents\@ML\notable-server\segmenter\slicer.py", line 63, in Slice
    ret, mat = binarize_image2(pill)
  File "C:\Users\aroue\Downloads\Documents\@ML\notable-server\segmenter\commonfunctions.py", line 70, in binarize_image2
    ret3, bin_img = cv2.threshold(img,0,255,cv2.THRESH_BINARY+cv2.THRESH_OTSU)
TypeError: Expected Ptr<cv::UMat> for argument 'src'

2021-03-08 16:36:00,837 - app - INFO - POST: success
2021-03-08 16:36:00,963 - app - INFO - # of files in request: 1
2021-03-08 16:36:00,963 - app - INFO - Host: localhost:5000
Connection: keep-alive
Content-Length: 25985
Cache-Control: max-age=0
Sec-Ch-Ua: "Chromium";v="88", "Google Chrome";v="88", ";Not A Brand";v="99"
Sec-Ch-Ua-Mobile: ?0
Upgrade-Insecure-Requests: 1
Origin: http://localhost:5000
Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryEyXy3GN86U0h5Odd
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.190 Safari/537.36
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9
Sec-Fetch-Site: same-origin
Sec-Fetch-Mode: navigate
Sec-Fetch-User: ?1
Sec-Fetch-Dest: document
Referer: http://localhost:5000/
Accept-Encoding: gzip, deflate, br
Accept-Language: en-US,en;q=0.9
Cookie: username-localhost-8889="2|1:0|10:1613749685|23:username-localhost-8889|44:ZDM3ZDc3YTUyNDE1NDFlMWE2ZmMyNmU1YTgwZWZmNGM=|99d0c6ad14108bd322ecb8bc116a3d6824612c71539e7642e77cba935b5c810c"; _xsrf=2|9e09c60d|671b43550472c70a2c60012cbf10b0db|1614128792; username-localhost-8888="2|1:0|10:1615192412|23:username-localhost-8888|44:MGVlYWYwODVjN2VmNGEzMGE3ZmNkMDY2M2YzNmQ2NTU=|e2521ccd40bd8bd9831fdf5abf4521025467bb5289530f2176d33e2127ddb36c"


2021-03-08 16:36:00,963 - app - INFO - File: exists
2021-03-08 16:36:00,963 - app - INFO - File: name = happybday.PNG
2021-03-08 16:36:00,963 - app - INFO - File: exists | Format: matching
2021-03-08 16:36:19,358 - app - ERROR - ERROR: prediction exceptiontile cannot extend outside image
2021-03-08 16:36:20,092 - app - ERROR - Traceback (most recent call last):
  File "C:\Users\aroue\anaconda3\lib\site-packages\PIL\ImageFile.py", line 510, in _save
    fh = fp.fileno()
AttributeError: '_idat' object has no attribute 'fileno'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "app.py", line 101, in predict
    all_predictions = model.predict(cv_img)
  File "C:\Users\aroue\Downloads\Documents\@ML\notable-server\ml_model.py", line 58, in predict
    segmented_staves = Slice(cv_img)
  File "C:\Users\aroue\Downloads\Documents\@ML\notable-server\segmenter\slicer.py", line 72, in Slice
    show_images([imgs_with_staff[0]])
  File "C:\Users\aroue\Downloads\Documents\@ML\notable-server\segmenter\commonfunctions.py", line 94, in show_images
    plt.imsave('test.png', image, cmap = plt.cm.gray)
  File "C:\Users\aroue\anaconda3\lib\site-packages\matplotlib\pyplot.py", line 2251, in imsave
    return matplotlib.image.imsave(fname, arr, **kwargs)
  File "C:\Users\aroue\anaconda3\lib\site-packages\matplotlib\image.py", line 1605, in imsave
    image.save(fname, **pil_kwargs)
  File "C:\Users\aroue\anaconda3\lib\site-packages\PIL\Image.py", line 2151, in save
    save_handler(self, fp, filename)
  File "C:\Users\aroue\anaconda3\lib\site-packages\PIL\PngImagePlugin.py", line 1339, in _save
    ImageFile._save(im, _idat(fp, chunk), [("zip", (0, 0) + im.size, 0, rawmode)])
  File "C:\Users\aroue\anaconda3\lib\site-packages\PIL\ImageFile.py", line 518, in _save
    e.setimage(im.im, b)
SystemError: tile cannot extend outside image

2021-03-08 16:46:05,912 - app - INFO - POST: success
2021-03-08 16:46:05,966 - app - INFO - # of files in request: 1
